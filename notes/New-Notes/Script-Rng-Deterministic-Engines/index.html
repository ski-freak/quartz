<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="&ldquo;deterministic engines & when games play themselves&rdquo;
A VERY rough draft.
This video is mostly just a vehicle to talk about some vaguely related topics: pf and trackmania being deterministic, mc bedrock redstone weirdness, fighting games being weird and forcing 60fps, and the card game bit at the end, in a way that is somewhat cohesive."><meta property="og:title" content="Script - Rng & Deterministic Engines"><meta property="og:description" content="&ldquo;deterministic engines & when games play themselves&rdquo;
A VERY rough draft.
This video is mostly just a vehicle to talk about some vaguely related topics: pf and trackmania being deterministic, mc bedrock redstone weirdness, fighting games being weird and forcing 60fps, and the card game bit at the end, in a way that is somewhat cohesive."><meta property="og:type" content="website"><meta property="og:image" content="https://ski-freak.github.io/quartz/icon.png"><meta property="og:url" content="https://ski-freak.github.io/quartz/notes/New-Notes/Script-Rng-Deterministic-Engines/"><meta property="og:width" content="200"><meta property="og:height" content="200"><meta name=twitter:card content="summary"><meta name=twitter:title content="Script - Rng & Deterministic Engines"><meta name=twitter:description content="&ldquo;deterministic engines & when games play themselves&rdquo;
A VERY rough draft.
This video is mostly just a vehicle to talk about some vaguely related topics: pf and trackmania being deterministic, mc bedrock redstone weirdness, fighting games being weird and forcing 60fps, and the card game bit at the end, in a way that is somewhat cohesive."><meta name=twitter:image content="https://ski-freak.github.io/quartz/icon.png"><meta name=twitter:site content="That_Ski_Freak"><title>Script - Rng & Deterministic Engines</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://ski-freak.github.io/quartz//icon.png><link href=https://ski-freak.github.io/quartz/styles.19109a40042e9f0e72e952fda4442a34.min.css rel=stylesheet><link href=https://ski-freak.github.io/quartz/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://ski-freak.github.io/quartz/js/darkmode.2630a6bfdca6ffec63a15ec2803a2f99.min.js></script>
<script src=https://ski-freak.github.io/quartz/js/util.00639692264b21bc3ee219733d38a8be.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1></script>
<script defer src=https://ski-freak.github.io/quartz/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js></script>
<script defer src=https://ski-freak.github.io/quartz/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://ski-freak.github.io/quartz/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://ski-freak.github.io/quartz/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://ski-freak.github.io/quartz/",fetchData=Promise.all([fetch("https://ski-freak.github.io/quartz/indices/linkIndex.8aadd299afb119005a1f2e81eb1e1980.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://ski-freak.github.io/quartz/indices/contentIndex.c04e5aeb760f519080f77a199bb92b6c.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://ski-freak.github.io/quartz",!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://ski-freak.github.io/quartz",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}var i=document.getElementsByClassName("mermaid");i.length>0&&import("https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs").then(e=>{e.default.init()});function a(n){const e=n.target,t=e.className.split(" "),s=t.includes("broken"),o=t.includes("internal-link");plausible("Link Click",{props:{href:e.href,broken:s,internal:o,graph:!1}})}const r=document.querySelectorAll("a");for(link of r)link.className.includes("root-title")&&link.addEventListener("click",a,{once:!0})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/ski-freak.github.io\/quartz\/js\/router.d6fe6bd821db9ea97f9aeefae814d8e7.min.js"
    attachSPARouting(init, render)
  </script><script defer data-domain=ski-freak.github.io/quartz src=https://plausible.io/js/script.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://ski-freak.github.io/quartz/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a class=root-title href=https://ski-freak.github.io/quartz/>Ski's Site</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>Script - Rng & Deterministic Engines</h1><p class=meta>Last updated
Aug 19, 2023
<a href=https://github.com/jackyzha0/quartz/tree/hugo/content/notes/New%20Notes/Script%20-%20Rng%20&%20Deterministic%20Engines.md rel=noopener>Edit Source</a></p><ul class=tags><li><a href=https://ski-freak.github.io/quartz/tags/wipvideo/>Wip video</a></li></ul><hr><p>&ldquo;deterministic engines & when games play themselves&rdquo;</p><p>A VERY rough draft.</p><p>This video is mostly just a vehicle to talk about some vaguely related topics: pf and trackmania being deterministic, mc bedrock redstone weirdness, fighting games being weird and forcing 60fps, and the card game bit at the end, in a way that is somewhat cohesive.</p><p>There is more I want to add that I forgot, and the whole section about how the engines work is a complete disaster at the moment due to information I found regarding unreal and unity physics being contradictory.</p><p>As a note, anything in {curly brackets} is a note and not part of the script.</p><hr><p>We often take for granted that when we do the same thing multiple times, we’ll get the same result each time.</p><p>If I flick this lever the contraption will do the same thing very time. You might say it is a deterministic system, the same initial state will always lead to the same outcome. Unfortunately, in video games this is not always the case.</p><p>This is a simple piston setup in minecraft bedrock edition, and as you can see, it doesn&rsquo;t always work the same way. If we hop back over to java minecraft, it&rsquo;s predictable. Even if we power the pistons at exactly the same time,
Bedrock redstone is non deterministic, it is&mldr; random. This is obviously quite horrible for what is essentially a logic simulation, as a wise mustachioed man once said, it&rsquo;s basically like if 2+2 equaled 4, most of the time, but occasionally added up to five. While this doesn&rsquo;t always cause problems, when combined with other differences it has caused the vast majority of the technical minecraft community to exist almost exclusively on the java version of the game, where things are predictable, consistent, and deterministic.</p><p>When there is 100% order and nothing is left to luck, incredible things are possible.</p><p>{autolevel montage, pf, mc circuits, mario maker, geometry dash} some kind of classical music maybe Tchaikovsky or swan lake or smth</p><p>In my last video I mentioned trackmania press forward maps, custom levels designed to finish themselves, all you need to do as the player is hold the forward button. The concept of a level playing itself is pretty old, I was unable to determine the earliest instance of one, but they&rsquo;ve been built often by players in level editors for decades now. Geometry dash and the super mario maker games are also good examples.</p><p>There is a real craft to making these maps, and the difference between one made by someone who has made 100 or zero is immediately obvious. While driving the maps doesn&rsquo;t take any skill, the ability to create interesting tricks and smooth landings definitely does. There&rsquo;s all kinds of these automatic levels, ones where you have to press left or right, or even nothing at all. As I mentioned in the other video, player made press forward tracks have gotten an insane number of views on youtube and tiktok over the years, and it&rsquo;s possible that more people have seen them than actually know what trackmania is. No matter the variety, they are only possible because the trackmania physics engine is deterministic.</p><p>If you drive a time in tm, if you do the same inputs again, the exact same thing will happen. This obviously leads to the conclusion that the game has no rng, which in the traditional sense of the word. You will however, find a certain subset of players and viewers saying that because of this, no map is random and calling anything on a track random is wrong, but reality is a bit more complicated than that.</p><p>This is a double pendulum.
it demonstrates chaos.
trackmania is chaotic.
{I need to expand on the above points, they are just there as placeholders since I wanted to keep writing other stuff}</p><p>even if you don&rsquo;t buy into that and still want to get out your nerd emoji and say actually it&rsquo;s technically not random, there are still external factors. Even if you move your thumb the same way on the analog stick of your controller, you&rsquo;ll probably get a slightly different result, because it&rsquo;s not a perfect instrument, and then that uncontrollable variable will have a butterfly effect on the chaotic system and create what is essentially a random outcome.
{resprit end of video thing}</p><p>Obviously these are all just technicalities, almost every map in trackmania is relatively consistent, at least in the newer games. The engine being deterministic doesn&rsquo;t really impact normal gameplay very much, even though it can be fun to use technicalities to point out to your favorite streamer that it&rsquo;s all just skill issue and they need to git gud.</p><p>There is another practical use for the game being deterministic, however. Back in tmnf and tm2, before there were official online leaderboards, replay files collected on player made websites and servers were how you kept track of who had the best times. The input data for these replays was unencrypted, and the game actually had a feature to verify the legitimacy of a given replay. This is possible because you can just play back those inputs, and if it matches the time on the replay, then you know the replay wasn&rsquo;t driven using speed hacks for example.</p><p>{damn it i forgot to talk about fighting games, I&rsquo;ll put it here later. they are notable for this video because they also control the frame rate in order to make everything visually conistent and have everything that ever happens in the game be communitcated to to the players in the same way each time}</p><p>While rather cool and interesting, a lot of these benefits of having aspects of a game be deterministic simply don&rsquo;t matter for most games, so it makes sense that many aren&rsquo;t. You may recall hearing another fun fact however, that computers are not truly random. Why then, aren&rsquo;t all games deterministic by default?</p><hr><p>Everything in this coming section is a complete mess due to lack of reliable information that I could find. The structure is also a mess because I kept changing it as I was going due to finding different contradictory information.</p><p>That varies depending the game, and it turns out that the old fun fact about computers never being random is only partially true. It is possible to generate random numbers by taking external inputs and using them as a basis for generating your random number. For example, you could take the movements of the user&rsquo;s mouse, and then do some math with that in order to get an actually random number. Many games utilize player actions and inputs to determine the seed for their rng, since it&rsquo;s a relatively easy way to do it. This is why it is possible for players to reverse engineer and manipulate the rng in games like minecraft. Whether this has anything to do with bedrock redstone however, I cannot know. {should I cut this entire part? and just ignore that people who think they are very smart will comment about computers not being random? probably}</p><p>That varies depending the game, and since I&rsquo;m not a minecraft developer I have no clue why bedrock redstone is broken, it could be due to any number of reasons. Speaking more generally, however, there&rsquo;s a few things that make it rather inconvenient or difficult to ensure determinism.</p><p>the answer has to do with math, and why your calculator sometimes lies to you.
also it doesn&rsquo;t matter most of the time, for the same reason that the chaos in trackmania usually never matters. {this is nice but only works if you put it in place of the previous block, so instead we move onto below I guess?}</p><p>Sometimes, your calculator lies to you.
These floating point numbers will always be consistent with themselves, if you do the same floating point calculation on the same system you will get the same result. However, on different hardware the result won&rsquo;t always be the same. This is due to blah blah blah cpu architecture etc.</p><p>physx, the physics engine that both unity and unreal engine use, will only be deterministic if you use the enhanced determinism mode, which forces all calculations to happen in a fixed order, basically.</p><p>In order for a physics engine to be deterministic, it needs to not use floating point numbers, only ever advance the simulation by fixed time steps, and all interactions must be resolved in a set order. If any of these aren&rsquo;t the case, or perhaps other factors I am not aware of as well, then it won&rsquo;t always be deterministic. It&rsquo;s understandable then</p><p>This information is impossible to turn into any statement that I can be sure is correct, I don&rsquo;t know what to do. Here are some links that seemed relatively useful.
<a href=https://www.reddit.com/r/learnprogramming/comments/7h0b4f/why_isnt_the_unity_physics_engine_deterministic/ rel=noopener>https://www.reddit.com/r/learnprogramming/comments/7h0b4f/why_isnt_the_unity_physics_engine_deterministic/</a>
<a href="https://www.stevestreeting.com/2020/07/26/using-bullet-for-physics-in-ue4/#:~:text=UE-uses-PhysX-%28like-Unity,in-a-fixed%2C-repeatable-order" rel=noopener>https://www.stevestreeting.com/2020/07/26/using-bullet-for-physics-in-ue4/#:~:text=UE%20uses%20PhysX%20(like%20Unity,in%20a%20fixed%2C%20repeatable%20order</a>
<a href=https://stackoverflow.com/questions/7365790/how-can-floating-point-calculations-be-made-deterministic rel=noopener>https://stackoverflow.com/questions/7365790/how-can-floating-point-calculations-be-made-deterministic</a>
<a href=https://forum.unity.com/threads/physx-determinism.127300/ rel=noopener>https://forum.unity.com/threads/physx-determinism.127300/</a></p><p>&ndash;end impossibly annoying to research and verify section&ndash;</p><hr><p>Allow me to ask you a question, why, in tabletop card games like magic the gathering and pokemon, as well as similar online games, do we shuffle the decks before we start playing? The obvious answer is that it makes each game more unique, like a minecraft seed. But if you think a bit more about what the game would look like if players could order their cards, it becomes a bit more clear. When you know ahead of time what cards you will have, and there is no variance in execution as it is just a card game, there is essentially no game to play anymore. You have already determined all of your moves, and unless your opponent has a surprise for you, which basically never happens within such environments, then the game once again plays itself, just like the trackmania press forward maps. Players of these games have experimented with using unlimited numbers of a single card in their deck, or ordering cards, and each time it ceases to be a game and becomes a puzzle to find the most unbeatable pile of cards. In a way the entire point of shuffling your cards and not knowing your opponent&rsquo;s in pokemon, magic, or hearthstone, is to prevent the game from becoming deterministic.</p><p>Thanks for watching.</p><p>A while back a friend on discord shared with me a concept for a card game in which it is the hidden information that prevents the game from being deterministic, rather than random cards. These long running card games really weren&rsquo;t designed to be played in a way where you have access to all your cards, and are completely broken when you do. Perhaps, if you designed a game explicitly around the choices and interactions between hidden but always available cards, you could make it work
{I should just cut this part as well, its kind of interesting but really doesn&rsquo;t fit, better to end at the end of the last block}</p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/quartz// data-ctx="Script - Rng & Deterministic Engines" data-src=/ class=internal-link>Home</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://ski-freak.github.io/quartz/js/graph.6579af7b10c818dbd2ca038702db0224.js></script></div></div><div id=contact_buttons><footer><p>Made by SkiFreak using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2023</p><ul><li><a href=https://ski-freak.github.io/quartz/>Home</a></li><li><a href=https://www.youtube.com/@Ski_Freak/featured>YouTube</a></li><li><a href=https://www.twitch.tv/that_ski_freak>Twitch</a></li><li><a href=https://discord.gg/sRB54zg>Discord Server</a></li><li><a href=https://twitter.com/That_Ski_Freak>Twitter</a></li></ul></footer></div></div></body></html>